#!/usr/bin/env ruby
unless RUBY_PLATFORM == 'java'
  puts 'This cucumber launcher must be run from JRuby'
  exit 1
end

require 'jruby'
JRuby.runtime.instance_config.run_ruby_in_process = false

$KCODE='U'
$redcar_process_start_time = Time.now

require 'rubygems'

$:.push(File.join(File.dirname(__FILE__), %w(.. lib)))
require "redcar_quick_start"

process_start_time = Time.now
$:.push File.join(File.dirname(__FILE__), '..', 'lib')

require 'redcar'
Redcar.environment = :test
Redcar.load_unthreaded
Redcar::Top.start
Redcar.gui.run_features(ARGV)
Redcar.pump